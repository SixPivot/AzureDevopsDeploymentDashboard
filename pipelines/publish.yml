# Build and publish extension to Marketplace

trigger:
  branches:
    include:
      - main

steps:
  - checkout: self
    fetchDepth: 0
    
  - task: NodeTool@0
    displayName: "NodeTool"
    inputs:
      versionSpec: "16.x"

  - task: Npm@1
    displayName: "Npm: Install"
    inputs:
      command: ci
      workingDir: extension

  - script: |
      npx nbgv cloud
    displayName: "Script: Set version"
    workingDirectory: extension

  - script: printenv
    displayName: "Script: printenv"

  - script: npm run tfx-create
    workingDirectory: extension